<!DOCTYPE html>
<html>

<head>
    <title>Move Brick</title>
    <link href="./style.css" rel="stylesheet">
</head>

<body>

    <canvas id="canv"></canvas>

    <script type="module">
        "use strict"
        //generic engine code
        import { getCanvas, getContext, getRandomX, getRandomY } from "./engine/Utilities.js"
        import Time from "./engine/Time.js"
        import Input from "./engine/Input.js"
        import Game from "./engine/Game.js"
        import MainScene from "./game/MainScene.js"
        let scene = new MainScene()
        Game.scenes.push(scene)
        Game.changeScene(0)



        //setup the canvas
        //let { canvas, ctx } = getCanvas()
        let canvas = getCanvas()
        let ctx = getContext(canvas)
        let gameObjects = []

        // //check for arrow key input
        Input.attach(document)


        function tick() {
            Game.updateScene()
            //check for timining between bullets
            let timeToShootBullet = 600
            if (Time.timePassedBullets >= timeToShootBullet) {
                scene.makeBullet()
                Time.timePassedBullets = 0
            }
            Game.scene().update(ctx)
            Game.scene().draw(ctx)
            Game.scene().remove()

            Time.timePassed += Time.secondsBetweenFrame
            Time.timePassedBullets += Time.millisecondsBetweenBullets
        }


        //run it
        setInterval(tick, Time.millisecondsBetweenFrames)


    </script>


</body>